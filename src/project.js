require=function o(t,e,r){function i(c,s){if(!e[c]){if(!t[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(n)return n(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var p=e[c]={exports:{}};t[c][0].call(p.exports,function(o){var e=t[c][1][o];return i(e||o)},p,p.exports,o,t,e,r)}return e[c].exports}for(var n="function"==typeof require&&require,c=0;c<r.length;c++)i(r[c]);return i}({GameStart:[function(o,t,e){"use strict";cc._RF.push(t,"43072Gqza5CJ54owDx1nF65","GameStart"),cc.Class({extends:cc.Component,properties:{},start:function(){},startBtn:function(){cc.director.loadScene("mainScene")}}),cc._RF.pop()},{}],MainScript:[function(o,t,e){"use strict";cc._RF.push(t,"c0983hiXN1B54N2MWHtDWwA","MainScript");var r=o("bg"),i=o("player");cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Node},player:{default:null,type:cc.Node}},onLoad:function(){var o=this.bg.getComponent(r),t=this.player.getComponent(i);this.row=o.row,this.col=o.col,this.playerPositionX=t.positionX,this.playerPositionY=t.positionY,o.createMap(),o.setChangeColorAction(this.playerPositionX,this.playerPositionY)},createSquareArr:function(){},start:function(){}}),cc._RF.pop()},{bg:"bg",player:"player"}],bg:[function(o,t,e){"use strict";cc._RF.push(t,"e379f5n0aBKfIR25TAdmDbL","bg");var r=o("player");cc.Class({extends:cc.Component,properties:{squarePrefab:{default:null,type:cc.Prefab},col:5,row:5,moveDuration:.5},onLoad:function(){},start:function(){},createMap:function(){for(var o=1;o<=this.col;o++)for(var t=1;t<=this.row;t++){var e=cc.instantiate(this.squarePrefab),r=e.getContentSize().width*(t-(this.col+1)/2),i=e.getContentSize().height*((this.col+1)/2-o);e.setPosition(r,i),e.coordinateX=o,e.coordinateY=t,(o-t)%2==0?(e.color=cc.Color.BLACK,e.originColor=cc.Color.BLACK):e.originColor=e.color,this.node.addChild(e)}},dealActionNodes:function(){var o=[];if(this.playerPositionX>1){var t=this.node.children[(this.playerPositionX-2)*this.row+this.playerPositionY-1];o.push(t)}if(this.playerPositionY<this.row){var e=this.node.children[(this.playerPositionX-1)*this.row+this.playerPositionY];o.push(e)}if(this.playerPositionX<this.col){var r=this.node.children[this.playerPositionX*this.row+this.playerPositionY-1];o.push(r)}if(this.playerPositionY>1){var i=this.node.children[(this.playerPositionX-1)*this.row+this.playerPositionY-2];o.push(i)}return o},changeColorAction:function(o){var t=cc.tintTo(this.moveDuration,o.ranColor.getR(),o.ranColor.getG(),o.ranColor.getB()),e=cc.tintTo(this.moveDuration,o.originColor.getR(),o.originColor.getG(),o.originColor.getB());return cc.sequence(t,e,o.returnAction)},callFuncAction:function(o){return cc.callFunc(function(){o.runAction(this.changeColorAction(o))},this)},setChangeColorAction:function(o,t){this.playerPositionX=o,this.playerPositionY=t;for(var e=this.dealActionNodes(),i=this.setColorsArr(e.length,this.colors),n=cc.callFunc(function(){var o=this.setColorsArr(1,i)[0];cc.find("Canvas/player").getComponent(r).node.runAction(cc.tintTo(this.moveDuration,o.getR(),o.getG(),o.getB()),cc.delayTime(this.moveDuration))},this),c=0,s=e.length;c<s;c++)e[c].ranColor=i[c],e[c].returnAction=c!=s-1?this.callFuncAction(e[c+1]):n;e[0].runAction(this.changeColorAction(e[0]))},setColorsArr:function(o,t){for(var e=[],r=(t=t||[cc.Color.RED,cc.Color.GREEN,cc.Color.BLUE,cc.Color.YELLOW,cc.Color.ORANGE,cc.Color.CYAN,cc.Color.MAGENTA]).length,i=0;i<o;i++){var n=~~(Math.random()*r)+i;e[i]=t[n],t[n]=t[i],r--}return e}}),cc._RF.pop()},{player:"player"}],gameOverScore:[function(o,t,e){"use strict";cc._RF.push(t,"334e8W3H5RE4Y3eTwPNVbkY","gameOverScore"),cc.Class({extends:cc.Component,properties:{scores:{default:null,type:cc.Label}},onLoad:function(){this.score=0,this.disScore()},start:function(){},disScore:function(){this.score=cc.sys.localStorage.getItem("ScoreDis"),this.scores.string=this.score.toString()}}),cc._RF.pop()},{}],player:[function(o,t,e){"use strict";cc._RF.push(t,"530b43ZxQBArZZ03OcM+Q8r","player"),cc.Class({extends:cc.Component,properties:{positionX:3,positionY:3,originColor:new cc.Color(255,0,0,255)},start:function(){},moveAction:function(){var o=cc.moveTo(.1,100*(this.positionY-3),100*(3-this.positionX));this.node.runAction(o),this.node.color=this.originColor}}),cc._RF.pop()},{}],score:[function(o,t,e){"use strict";cc._RF.push(t,"2b930t5fgdJwrZ1B4i8xeK3","score"),cc.Class({extends:cc.Component,properties:{scores:{default:null,type:cc.Label}},onLoad:function(){this.score=0,this.saveScore()},saveScore:function(){cc.sys.localStorage.setItem("ScoreDis",this.scores.string)},gainScore:function(){this.score+=1,this.scores.string=this.score.toString(),this.saveScore()}}),cc._RF.pop()},{}],square:[function(o,t,e){"use strict";cc._RF.push(t,"a25eeCmnLdK/7FO1ER9XoqE","square");var r=o("bg"),i=o("player"),n=o("score");cc.Class({extends:cc.Component,properties:{originColor:new cc.Color(255,255,255,255)},onLoad:function(){},setSquareEvent:function(o){var t=o.target,e=cc.find("Canvas/bg").getComponent(r),c=cc.find("Canvas/player").getComponent(i),s=cc.find("Canvas/score").getComponent(n);t.ranColor.equals(c.node.color)?(c.positionX=t.coordinateX,c.positionY=t.coordinateY,c.moveAction(),s.gainScore(),e.setChangeColorAction(c.positionX,c.positionY)):cc.director.loadScene("gameoverScene")}}),cc._RF.pop()},{bg:"bg",player:"player",score:"score"}]},{},["GameStart","MainScript","bg","gameOverScore","player","score","square"]);